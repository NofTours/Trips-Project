
<h3>Area:</h3>

<p-dropdown #area [options]="areas" editable="true" placeholder="Select an area" optionLabel="name"  (onChange)="changeArea($event)"></p-dropdown>
<!-- <p>Selected Area: {{searchInfo.Area.name ? searchInfo.Area.name : 'none'}}</p> -->

<h3>Category:</h3>
<p-dropdown #category  [options]="categories" editable="true" placeholder="Select category" optionLabel="name"  (onChange)="changeCategory($event)"></p-dropdown>
<!-- <p>Selected Category: {{searchInfo.Category.name ? searchInfo.Category.name : 'none'}}</p> -->
<button type="button" pButton label="Search" (click)="search()"></button><br>
<button type="button" pButton label="Clear Search" (click)="clearSearch();area.clear();category.clear()"></button>



<h3>Where do you want to visit?? Drag and drop to table!!</h3>
<div class="ui-g">
    <p-dataView [value]="availableSites"  rows="4"
     filterBy="Name" #dv dragdrop="true" pDraggable="sites">
     <p-header>
            <input type="search" pInputText placeholder="Search by name" (input)="dv.filter($event.target.value, 'contains')">
        </p-header>
    <ng-template let-site pTemplate="listItem" >
        <div class="ui-dataview-content" pDraggable="sites" 
        (onDragStart)="dragStart($event,site)" (onDragEnd)="dragEnd($event)" >
            <img src="../../../assets/img/Massada.png" style="display:inline-block;margin:2px 0 2px 2px;float:left;;" width="48" draggable="false">
            <div style="margin:8px 0 0 8px;float: left;"><h6>{{site.Name}}</h6>
                <p>{{site.Description}}</p>
            </div>
        </div>
        
    </ng-template>
</p-dataView>
<br>
<br>

<p-card header="Your Sites -Reorder By Dragging...
" [style]="{width: '850px', height:'700px'}" styleClass="ui-card-shadow">
    <!-- <div class="alert alert-info">
        Your chosen date and time are:<br>
        Date:{{this.tripService.getTripDate() | date:'short'}} 
     </div> -->
    <div class="ui-g-12 ui-md-6 drop-column" pDroppable="sites" 
        (onDrop)="drop($event)" [ngClass]="{'ui-highlight-car':draggedSite}">
        <p-table [value]="selectedSites" [style]="{width: '850px',height:'400px'}">
               
            <ng-template pTemplate="header">
                <tr>
                    <th>Order in Trip</th>
                    <th>Name</th>
                    <th>Area</th>
                    <th>Price</th>
                    <th>Category</th>
                    <th>Description</th>
                    <th>OpeningHour</th>
                    <th>ClosingHour</th>
                    <th>EstimatedStay</th>
                </tr>
            </ng-template>
                <ng-template pTemplate="body" let-selectedSite >                   
                <tr pDraggable pDroppable (onDragStart)="dragStart2($event,selectedSite)" (onDrop)="cdkdrop($event)" dragHandle=".drag-handler" >
                    <td>{{this.findIndexByName(selectedSite.Name)}}</td>
                    <td class="drag-handler">{{selectedSite.Name}}</td>
                    <td>{{selectedSite.Area}}</td>
                    <td>{{selectedSite.Price}}</td>
                    <td>{{selectedSite.Category}}</td>
                    <td>{{selectedSite.Description}}</td>
                    <td>{{selectedSite.OpeningHour}}</td>
                    <td>{{selectedSite.ClosingHour}}</td>
                    <td>{{selectedSite.EstimatedStay}}</td>
                </tr>
            </ng-template>
        </p-table>
    </div>
    <p-footer>    
  
        <ul>
            <li *ngFor="let selectedSite of selectedSites">{{selectedSite.Equipment}}</li>
        </ul>
</p-footer>
</p-card>

<!-- <ul>
    <li *ngFor="let selectedSite of selectedSites">{{selectedSite.Equipment}}</li>
</ul> -->

<div class="intro-button mx-auto">
    <button class="btn btn-primary btn-xl" (click)="saveSitesToTrip()">continue</button>
</div>


</div>  